import{a as Y}from"./chunk-BHEACCP3.js";import{a as J,b as W,t as X}from"./chunk-S3XCMD5U.js";import{C as h,D as w,E as y,Fa as G,G as E,Ha as Q,I as R,Ia as H,J as k,K as B,L as O,M as P,Q as F,b as I,c as C,d as S,e as a,f as b,fa as j,g as z,h as M,i as g,j as e,k as t,l as D,ma as T,na as A,o as N,oa as L,p as x,q as _,qa as q,s as n,sa as V,t as f,u as v,ua as K,wa as U,xa as $}from"./chunk-PCYDMJPV.js";import"./chunk-W6H37XDB.js";import"./chunk-7KGURMOZ.js";import"./chunk-YK4DTNHI.js";import"./chunk-YK3APVNZ.js";import"./chunk-366LSZGT.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function ee(m,c){if(m&1){let l=N();e(0,"ion-item",27),x("click",function(){let i=I(l).$implicit,o=_();return C(o.openRechnung(i.projektNr,i.rechnungIndex))}),e(1,"ion-grid",28)(2,"ion-row",17)(3,"ion-col",18),n(4),h(5,"date"),t(),e(6,"ion-col",29),n(7),t(),e(8,"ion-col",20)(9,"ion-chip",30),n(10),t()(),e(11,"ion-col",31),n(12),t(),e(13,"ion-col",22),n(14),h(15,"currency"),t(),e(16,"ion-col",22),n(17),h(18,"currency"),t(),e(19,"ion-col",23),n(20),h(21,"date"),t()()()()}if(m&2){let l=c.$implicit,u=_();a(4),f(w(5,8,l.datum,"dd.MM.yyyy")),a(3),f(l.nr),a(2),g("color",u.getStatusColor(l.status)),a(),f(l.status),a(2),f(l.kunde),a(2),v(" ",y(15,11,l.betragNetto,"EUR","symbol","1.2-2")," "),a(3),v(" ",l.betragBrutto!==null&&l.betragBrutto!==void 0?y(18,16,l.betragBrutto,"EUR","symbol","1.2-2"):"\u2014"," "),a(3),v(" ",l.faelligAm?w(21,21,l.faelligAm,"dd.MM.yyyy"):"\u2014"," ")}}function te(m,c){m&1&&(e(0,"ion-item",32),n(1," Keine Rechnungen gefunden "),t())}var me=(()=>{let c=class c{constructor(u,i){this.dummy=u,this.router=i,this.projekteSig=this.dummy.projektesig,this.query=S(""),this.statusFilter=S("alle"),this.allInvoices=E(()=>{let o=[];for(let r of this.projekteSig())(r.rechnungen??[]).forEach((d,p)=>{o.push({datum:new Date(d.datum),nr:d.nr,status:d.status,kunde:r.kunde,betragNetto:d.betragNetto,betragBrutto:d.betragBrutto,faelligAm:d.faelligAm?new Date(d.faelligAm):void 0,projektNr:r.nr,letzteAenderung:new Date(r.letzteAenderung),rechnungIndex:p})});return o.sort((r,s)=>+s.datum-+r.datum),o}),this.filtered=E(()=>{let o=this.query().toLowerCase().trim(),r=this.statusFilter();return this.allInvoices().filter(s=>{let d=!o||s.nr.toLowerCase().includes(o)||s.kunde.toLowerCase().includes(o)||s.projektNr.toLowerCase().includes(o),p=s.status.toLowerCase(),Z=r==="alle"||r==="Entwurf"&&p.includes("entwurf")||r==="Offen"&&p.includes("offen")||r==="Teilgezahlt"&&p.includes("teil")||r==="Bezahlt"&&p.includes("bezahlt")||r==="\xDCberf\xE4llig"&&p.includes("\xFCberf\xE4llig")||r==="Storniert"&&p.includes("storniert");return d&&Z})}),this.dummy.createProjects(),J({addOutline:W,searchOutline:X})}getStatusColor(u){let i=u.toLowerCase();return i.includes("bezahlt")?"success":i.includes("teil")?"tertiary":i.includes("\xFCberf\xE4llig")||i.includes("storniert")?"danger":i.includes("offen")?"warning":(i.includes("entwurf"),"medium")}openRechnung(u,i){this.router.navigate(["/rechnungen",u,i])}};c.\u0275fac=function(i){return new(i||c)(b(Y),b(F))},c.\u0275cmp=z({type:c,selectors:[["app-rechnungen"]],decls:44,vars:4,consts:[[1,"listContent"],[1,"page-heading"],[1,"toolbar-row"],[1,"left"],["interface","popover",3,"ionChange","value"],["value","alle"],["value","Entwurf"],["value","Offen"],["value","Teilgezahlt"],["value","Bezahlt"],["value","\xDCberf\xE4llig"],["value","Storniert"],[1,"right"],["placeholder","Suche","show-clear-button","focus","search-icon","search-outline",3,"ionInput","value"],["color","primary","fill","solid"],["slot","start","name","add-outline"],["fixed","",1,"row-grid","tbl","header","ion-padding-start","ion-padding-end"],[1,"ion-align-items-center"],["size","12","size-md","2.2"],["size","6","size-md","1.4"],["size","6","size-md","1.6"],["size","12","size-md","2.0"],["size","6","size-md","1.6",1,"right"],["size","6","size-md","1.4",1,"right","rightColumn"],[1,"table-list"],["button","","lines","full","detail","false","class","table-row",3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["button","","lines","full","detail","false",1,"table-row",3,"click"],["fixed","",1,"row-grid"],["size","6","size-md","1.4",1,"muted","ellipsis"],[3,"color"],["size","12","size-md","2.0",1,"ellipsis"],["lines","none"]],template:function(i,o){i&1&&(e(0,"ion-content",0)(1,"div",1),n(2,"Rechnungen"),t(),e(3,"div",2)(4,"div",3)(5,"ion-select",4),x("ionChange",function(s){return o.statusFilter.set(s.detail.value)}),e(6,"ion-select-option",5),n(7,"Alle Rechnungen"),t(),e(8,"ion-select-option",6),n(9,"Entwurf"),t(),e(10,"ion-select-option",7),n(11,"Offen"),t(),e(12,"ion-select-option",8),n(13,"Teilgezahlt"),t(),e(14,"ion-select-option",9),n(15,"Bezahlt"),t(),e(16,"ion-select-option",10),n(17,"\xDCberf\xE4llig"),t(),e(18,"ion-select-option",11),n(19,"Storniert"),t()()(),e(20,"div",12)(21,"ion-searchbar",13),x("ionInput",function(s){return o.query.set(s.detail.value??"")}),t(),e(22,"ion-button",14),D(23,"ion-icon",15),n(24," Neue Rechnung "),t()()(),e(25,"ion-grid",16)(26,"ion-row",17)(27,"ion-col",18),n(28,"Datum"),t(),e(29,"ion-col",19),n(30,"Nr."),t(),e(31,"ion-col",20),n(32,"Status"),t(),e(33,"ion-col",21),n(34,"Kunde"),t(),e(35,"ion-col",22),n(36,"Netto"),t(),e(37,"ion-col",22),n(38,"Brutto"),t(),e(39,"ion-col",23),n(40,"F\xE4llig"),t()()(),e(41,"ion-list",24),M(42,ee,22,24,"ion-item",25)(43,te,2,0,"ion-item",26),t()()),i&2&&(a(5),g("value",o.statusFilter()),a(16),g("value",o.query()),a(21),g("ngForOf",o.filtered()),a(),g("ngIf",!o.filtered().length))},dependencies:[L,q,U,A,K,V,T,Q,H,$,j,G,R,P,k,B,O],styles:[".toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}.toolbar-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.row-grid[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-weight:500;margin-bottom:6px}ion-searchbar[_ngcontent-%COMP%]{max-width:380px;--border-radius: 10px}"]});let m=c;return m})();export{me as RechnungenPage};
