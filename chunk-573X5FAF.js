import{a as ee}from"./chunk-DWTWEUSI.js";import{a as J,b as W,f as X,n as Y,s as Z}from"./chunk-PRD3V2AJ.js";import{D as b,E as w,F as k,H as S,Ha as Q,J as O,Ja as U,K as P,Ka as H,L as N,M as D,N as F,R as j,b as I,c as C,d as x,e as r,f as v,g as E,h as z,ha as L,i as p,j as t,k as n,l as A,o as M,oa as q,p as f,pa as T,q as _,qa as B,s as i,sa as V,t as g,u as y,ua as R,wa as K,ya as $,za as G}from"./chunk-6T7TN4AG.js";import"./chunk-W6H37XDB.js";import"./chunk-7KGURMOZ.js";import"./chunk-YK4DTNHI.js";import"./chunk-YK3APVNZ.js";import"./chunk-366LSZGT.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function ne(u,c){if(u&1){let s=M();t(0,"ion-item",25),f("click",function(){let e=I(s).$implicit,o=_();return C(o.openAngebot(e.projektNr,e.angebotIndex))}),t(1,"ion-grid",26)(2,"ion-row",15)(3,"ion-col",16),i(4),b(5,"date"),n(),t(6,"ion-col",27),i(7),n(),t(8,"ion-col",18)(9,"ion-chip",28),i(10),n()(),t(11,"ion-col",29),i(12),n(),t(13,"ion-col",30),i(14),n(),t(15,"ion-col",20),i(16),b(17,"currency"),n(),t(18,"ion-col",21),i(19),b(20,"date"),n()()()()}if(u&2){let s=c.$implicit,d=_();r(4),g(w(5,8,s.datum,"dd.MM.yyyy")),r(3),g(s.nr||"-"),r(2),p("color",d.getStatusColor(s.status)),r(),g(s.status),r(2),g(s.name),r(2),g(s.kunde),r(2),y(" ",k(17,11,s.betragNetto,"EUR","symbol","1.2-2")," "),r(3),y(" ",w(20,16,s.letzteAenderung,"dd.MM.yyyy")," ")}}function ie(u,c){u&1&&(t(0,"ion-item",31),i(1," Keine Angebote gefunden "),n())}var ge=(()=>{let c=class c{constructor(d,e){this.dummy=d,this.router=e,this.projekteSig=this.dummy.projektesig,this.query=x(""),this.statusFilter=x("alle"),this.allOffers=S(()=>{let o=[];for(let l of this.projekteSig())(l.angebote??[]).forEach((m,h)=>{o.push({datum:new Date(m.datum),nr:m.nr,status:m.status,name:m.name,kunde:l.kunde,betragNetto:m.betragNetto,projektNr:l.nr,letzteAenderung:new Date(l.letzteAenderung),angebotIndex:h})});return o.sort((l,a)=>+a.datum-+l.datum),o}),this.filtered=S(()=>{let o=this.query().toLowerCase().trim(),l=this.statusFilter().toLowerCase();return this.allOffers().filter(a=>{let m=!o||a.name.toLowerCase().includes(o)||a.nr.toLowerCase().includes(o)||a.kunde.toLowerCase().includes(o),h=(a.status??"").toLowerCase(),te=l==="alle"||h.includes(l);return m&&te})}),this.dummy.createProjects(),J({businessOutline:X,homeOutline:Y,addOutline:W,searchOutline:Z})}getStatusColor(d){let e=d.toLowerCase();return e.includes("abgeschlossen")?"success":e.includes("geplant")||e.includes("termin")?"primary":e.includes("arbeit")||e.includes("best\xE4tigt")?"tertiary":e.includes("erledigt")?"success":e.includes("angebot")||e.includes("entwurf")||e.includes("versendet")?"warning":e.includes("akzeptiert")?"success":e.includes("abgelehnt")?"danger":e.includes("rechnung")?"medium":e.includes("offen")?"warning":e.includes("teilgezahlt")?"tertiary":e.includes("bezahlt")?"success":e.includes("\xFCberf\xE4llig")||e.includes("storniert")?"danger":"medium"}openAngebot(d,e){this.router.navigate(["/angebote",d,e])}};c.\u0275fac=function(e){return new(e||c)(v(ee),v(j))},c.\u0275cmp=E({type:c,selectors:[["app-angebote"]],decls:40,vars:4,consts:[[1,"listContent"],[1,"page-heading"],[1,"toolbar-row"],[1,"left"],["interface","popover",3,"ionChange","value"],["value","alle"],["value","Entwurf"],["value","Versendet"],["value","Akzeptiert"],["value","Abgelehnt"],[1,"right"],["placeholder","Suche","show-clear-button","focus","search-icon","search-outline",3,"ionInput","value"],["color","primary","fill","solid"],["slot","start","name","add-outline"],["fixed","",1,"row-grid","tbl","header","ion-padding-start","ion-padding-end"],[1,"ion-align-items-center"],["size","12","size-md","2.2"],["size","6","size-md","1.2"],["size","6","size-md","1.6"],["size","12","size-md","2.0"],["size","6","size-md","1.6",1,"right"],["size","6","size-md","1.2",1,"right","rightColumn"],[1,"table-list"],["button","","lines","full","detail","false","class","table-row",3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["button","","lines","full","detail","false",1,"table-row",3,"click"],["fixed","",1,"row-grid"],["size","6","size-md","1.2",1,"muted","ellipsis"],[3,"color"],["size","12","size-md","2.0",1,"ellipsis"],["size","12","size-md","2.2",1,"ellipsis"],["lines","none"]],template:function(e,o){e&1&&(t(0,"ion-content",0)(1,"div",1),i(2,"Angebote"),n(),t(3,"div",2)(4,"div",3)(5,"ion-select",4),f("ionChange",function(a){return o.statusFilter.set(a.detail.value)}),t(6,"ion-select-option",5),i(7,"Alle Angebote"),n(),t(8,"ion-select-option",6),i(9,"Entwurf"),n(),t(10,"ion-select-option",7),i(11,"Versendet"),n(),t(12,"ion-select-option",8),i(13,"Akzeptiert"),n(),t(14,"ion-select-option",9),i(15,"Abgelehnt"),n()()(),t(16,"div",10)(17,"ion-searchbar",11),f("ionInput",function(a){return o.query.set(a.detail.value??"")}),n(),t(18,"ion-button",12),A(19,"ion-icon",13),i(20," Neues Angebot "),n()()(),t(21,"ion-grid",14)(22,"ion-row",15)(23,"ion-col",16),i(24,"Angebotsdatum"),n(),t(25,"ion-col",17),i(26,"Nr."),n(),t(27,"ion-col",18),i(28,"Status"),n(),t(29,"ion-col",19),i(30,"Angebotsname"),n(),t(31,"ion-col",16),i(32,"Kunde"),n(),t(33,"ion-col",20),i(34,"Betrag (netto)"),n(),t(35,"ion-col",21),i(36,"Letzte \xC4nderung"),n()()(),t(37,"ion-list",22),z(38,ne,21,19,"ion-item",23)(39,ie,2,0,"ion-item",24),n()()),e&2&&(r(5),p("value",o.statusFilter()),r(12),p("value",o.query()),r(21),p("ngForOf",o.filtered()),r(),p("ngIf",!o.filtered().length))},dependencies:[B,V,$,T,K,R,q,L,U,O,H,Q,G,F,P,N,D],styles:[".toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}.toolbar-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.row-grid[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-weight:500;margin-bottom:6px}ion-searchbar[_ngcontent-%COMP%]{max-width:380px;--border-radius: 10px}"]});let u=c;return u})();export{ge as AngebotePage};
