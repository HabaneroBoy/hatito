import{a as pe}from"./chunk-BHEACCP3.js";import{a as de,b as ge,t as ce}from"./chunk-S3XCMD5U.js";import{Aa as ie,C as S,Ca as oe,D as O,E as k,F as T,Fa as re,G as V,Ga as le,Ha as ae,I as B,Ia as se,J as W,Ja as me,K as D,L as N,M as F,W as q,X as A,Y as j,Z as R,b as d,ba as G,c as g,d as C,e as a,f as P,fa as H,g as I,ga as K,h as y,i as p,j as n,k as t,l as v,ma as U,na as J,o as M,oa as Q,p as x,q as m,qa as X,r as z,ra as Y,s as r,sa as Z,t as w,ta as $,u as b,ua as ee,v as L,w as u,wa as te,x as _,xa as ne,y as f}from"./chunk-PCYDMJPV.js";import"./chunk-W6H37XDB.js";import"./chunk-7KGURMOZ.js";import"./chunk-YK4DTNHI.js";import"./chunk-YK3APVNZ.js";import"./chunk-366LSZGT.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function _e(s,c){s&1&&(n(0,"ion-grid",12)(1,"ion-row",13)(2,"ion-col",14),r(3,"Bezeichnung"),t(),n(4,"ion-col",15),r(5,"Art"),t(),n(6,"ion-col",15),r(7,"Einheit"),t(),n(8,"ion-col",16),r(9,"Preis (netto)"),t(),n(10,"ion-col",16),r(11,"Aktualisiert"),t()()())}function fe(s,c){if(s&1&&(n(0,"div",23),r(1),t()),s&2){let o=m().$implicit;a(),w(o.beschreibung)}}function he(s,c){if(s&1&&(n(0,"ion-item",19)(1,"ion-grid",20)(2,"ion-row",13)(3,"ion-col",21)(4,"div",22),r(5),t(),n(6,"div",23),r(7),t(),y(8,fe,2,1,"div",24),t(),n(9,"ion-col",25)(10,"ion-chip",26),r(11),t()(),n(12,"ion-col",27)(13,"div",28),r(14),t()(),n(15,"ion-col",29),r(16),S(17,"currency"),t(),n(18,"ion-col",30),r(19),S(20,"date"),t()()()()),s&2){let o=c.$implicit,l=m(2);a(5),w(o.titel),a(2),b("Nr. ",o.nummer),a(),p("ngIf",o.beschreibung),a(2),p("color",l.getTypColor(o.typ)),a(),w(o.typ),a(3),L("",o.menge," ",o.einheit),a(2),b(" ",k(17,9,o.einzelpreis,"EUR","symbol","1.2-2")," "),a(3),b(" ",O(20,14,o.zuletztAktualisiert,"dd.MM.yyyy")," ")}}function xe(s,c){if(s&1&&(n(0,"ion-list",17),y(1,he,21,17,"ion-item",18),t()),s&2){let o=m();a(),p("ngForOf",o.leistungen())("ngForTrackBy",o.trackById)}}function ye(s,c){s&1&&(n(0,"ion-item",31),r(1,"Noch keine Leistungen angelegt."),t())}function we(s,c){if(s&1){let o=M();n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3,"Neue Leistung anlegen"),t(),n(4,"ion-buttons",32)(5,"ion-button",33),x("click",function(){d(o);let e=m();return g(e.closeModal())}),r(6,"Schlie\xDFen"),t()()()(),n(7,"ion-content",34)(8,"ion-list",35)(9,"ion-item")(10,"ion-label",36),r(11,"Bezeichnung *"),t(),n(12,"ion-input",37),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.titel,e)||(i.form.titel=e),g(e)}),t()(),n(13,"ion-item")(14,"ion-label",36),r(15,"Nummer"),t(),n(16,"ion-input",38),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.nummer,e)||(i.form.nummer=e),g(e)}),t()(),n(17,"ion-item")(18,"ion-label",36),r(19,"Art"),t(),n(20,"ion-select",39),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.typ,e)||(i.form.typ=e),g(e)}),n(21,"ion-select-option",40),r(22,"Dienstleistung"),t(),n(23,"ion-select-option",41),r(24,"Ersatzteil"),t()()(),n(25,"ion-item")(26,"ion-label",36),r(27,"Beschreibung"),t(),n(28,"ion-textarea",42),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.beschreibung,e)||(i.form.beschreibung=e),g(e)}),t()(),n(29,"ion-item")(30,"ion-label",36),r(31,"Standardmenge"),t(),n(32,"ion-input",43),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.menge,e)||(i.form.menge=e),g(e)}),t()(),n(33,"ion-item")(34,"ion-label",36),r(35,"Einheit"),t(),n(36,"ion-input",44),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.einheit,e)||(i.form.einheit=e),g(e)}),t()(),n(37,"ion-item")(38,"ion-label",36),r(39,"Einzelpreis (netto)"),t(),n(40,"ion-input",45),f("ngModelChange",function(e){d(o);let i=m();return _(i.form.einzelpreis,e)||(i.form.einzelpreis=e),g(e)}),t()()(),n(41,"ion-buttons",46)(42,"ion-button",47),x("click",function(){d(o);let e=m();return g(e.closeModal())}),r(43,"Abbrechen"),t(),n(44,"ion-button",48),x("click",function(){d(o);let e=m();return g(e.submit())}),r(45,"Speichern"),t()()()}if(s&2){let o=m();a(12),u("ngModel",o.form.titel),a(4),u("ngModel",o.form.nummer),a(4),u("ngModel",o.form.typ),a(8),u("ngModel",o.form.beschreibung),a(4),u("ngModel",o.form.menge),a(4),u("ngModel",o.form.einheit),a(4),u("ngModel",o.form.einzelpreis),a(4),p("disabled",!o.form.titel.trim())}}var Be=(()=>{let c=class c{constructor(l){this.dummy=l,this.query=C(""),this.modalOpen=C(!1),this.form={nummer:"",titel:"",typ:"Dienstleistung",beschreibung:"",menge:1,einheit:"Std",einzelpreis:0},this.katalog=this.dummy.leistungskatalogsig,this.leistungen=V(()=>{let e=this.query().trim().toLowerCase();return[...this.katalog()].filter(i=>e?i.titel.toLowerCase().includes(e)||i.nummer?.toLowerCase().includes(e)||i.beschreibung?.toLowerCase().includes(e):!0).sort((i,h)=>h.zuletztAktualisiert.getTime()-i.zuletztAktualisiert.getTime())}),this.trackById=(e,i)=>i.id,de({addOutline:ge,searchOutline:ce})}getTypColor(l){let e=l.toLowerCase();return e.includes("dienst")?"primary":e.includes("teil")?"tertiary":"medium"}openModal(){this.modalOpen.set(!0)}closeModal(){this.modalOpen.set(!1),this.resetForm()}resetForm(){this.form={nummer:"",titel:"",typ:"Dienstleistung",beschreibung:"",menge:1,einheit:"Std",einzelpreis:0}}submit(){let l=this.form;l.titel?.trim()&&(this.dummy.addLeistungskatalogEintrag({nummer:l.nummer,titel:l.titel,beschreibung:l.beschreibung,typ:l.typ,menge:l.menge,einheit:l.einheit,einzelpreis:l.einzelpreis}),this.closeModal())}};c.\u0275fac=function(e){return new(e||c)(P(pe))},c.\u0275cmp=I({type:c,selectors:[["app-leistungen"]],decls:16,vars:5,consts:[["emptyState",""],[1,"listContent"],[1,"page-heading"],[1,"toolbar-row"],[1,"left"],["placeholder","Suche","show-clear-button","focus","search-icon","search-outline",3,"ionInput","value"],[1,"right"],["color","primary","fill","solid",3,"click"],["slot","start","name","add-outline"],["fixed","","class","row-grid header ion-padding-start ion-padding-end",4,"ngIf"],["class","table-list",4,"ngIf","ngIfElse"],[3,"didDismiss","isOpen"],["fixed","",1,"row-grid","header","ion-padding-start","ion-padding-end"],[1,"ion-align-items-center"],["size","12","size-md","4"],["size","6","size-md","2"],["size","6","size-md","2",1,"right"],[1,"table-list"],["lines","full","class","table-row",4,"ngFor","ngForOf","ngForTrackBy"],["lines","full",1,"table-row"],["fixed","",1,"row-grid"],["size","12","size-md","4",1,"name"],[1,"primary","ellipsis"],[1,"muted","ellipsis"],["class","muted ellipsis",4,"ngIf"],["size","6","size-md","2",1,"type"],[3,"color"],["size","6","size-md","2",1,"unit"],[1,"primary"],["size","6","size-md","2",1,"price","right"],["size","6","size-md","2",1,"updated","right"],["lines","none",1,"empty"],["slot","end"],[3,"click"],[1,"ion-padding"],["lines","full"],["position","stacked"],["placeholder","z. B. Montage","required","",3,"ngModelChange","ngModel"],["placeholder","z. B. LK-101",3,"ngModelChange","ngModel"],["interface","popover",3,"ngModelChange","ngModel"],["value","Dienstleistung"],["value","Ersatzteil"],["auto-grow","true","rows","3","placeholder","optional",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.5",3,"ngModelChange","ngModel"],["placeholder","z. B. Std",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",3,"ngModelChange","ngModel"],[1,"modal-actions"],["fill","outline",3,"click"],["color","primary",3,"click","disabled"]],template:function(e,i){if(e&1){let h=M();n(0,"ion-content",1)(1,"div",2),r(2,"Leistungskatalog"),t(),n(3,"div",3)(4,"div",4)(5,"ion-searchbar",5),x("ionInput",function(ue){return d(h),g(i.query.set(ue.detail.value??""))}),t()(),n(6,"div",6)(7,"ion-button",7),x("click",function(){return d(h),g(i.openModal())}),v(8,"ion-icon",8),r(9," Neue Leistung "),t()()(),y(10,_e,12,0,"ion-grid",9)(11,xe,2,2,"ion-list",10)(12,ye,2,0,"ng-template",null,0,T),t(),n(14,"ion-modal",11),x("didDismiss",function(){return d(h),g(i.closeModal())}),y(15,we,46,8,"ng-template"),t()}if(e&2){let h=z(13);a(5),p("value",i.query()),a(5),p("ngIf",i.leistungen().length),a(),p("ngIf",i.leistungen().length)("ngIfElse",h),a(3),p("isOpen",i.modalOpen())}},dependencies:[Q,Y,ie,oe,H,K,ae,X,te,J,ee,Z,re,U,G,le,se,ne,me,F,B,W,R,q,j,A,$,N,D],styles:[".toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}.toolbar-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}ion-searchbar[_ngcontent-%COMP%]{max-width:320px;--border-radius: 10px}.header[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-weight:500;margin-top:12px;margin-bottom:6px}.table-list[_ngcontent-%COMP%]{background:transparent;--padding-start: 0;--inner-padding-end: 0}.table-row[_ngcontent-%COMP%]{--background: transparent}.table-row[_ngcontent-%COMP%]::part(native){padding:0}.row-grid[_ngcontent-%COMP%]{width:100%}.name[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-text-color)}.muted[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.85rem}.right[_ngcontent-%COMP%]{text-align:right}.empty[_ngcontent-%COMP%]{margin-top:20px;justify-content:center;color:var(--ion-color-medium)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:20px}@media (hover: hover){.table-row[_ngcontent-%COMP%]:hover::part(native){background:rgba(var(--ion-color-primary-rgb),.06)}}@media (max-width: 960px){.header[_ngcontent-%COMP%]{display:none}.right[_ngcontent-%COMP%]{text-align:left}}"]});let s=c;return s})();export{Be as LeistungenPage};
