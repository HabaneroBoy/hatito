import{a as X}from"./chunk-Q6GIVHUN.js";import{A as h,B as _,Ba as $,C as k,Ca as G,Da as Q,E as y,Ea as U,F as O,H as M,Ha as H,I as P,N as j,Qa as J,Va as W,b as S,ba as D,c as C,d as b,e as a,f as x,g as z,h as E,i as p,ia as F,j as e,ja as L,k as n,ka as N,l as I,m as A,ma as V,n as f,o as v,oa as q,q as i,qa as T,r as g,s as w,sa as B,ta as R,za as K}from"./chunk-XY2HQUN5.js";import"./chunk-W6H37XDB.js";import"./chunk-7KGURMOZ.js";import"./chunk-YK4DTNHI.js";import"./chunk-YK3APVNZ.js";import"./chunk-366LSZGT.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function Z(c,u){if(c&1){let s=A();e(0,"ion-item",25),f("click",function(){let t=S(s).$implicit,r=v();return C(r.openProjekt(t.projektNr))}),e(1,"ion-grid",26)(2,"ion-row",15)(3,"ion-col",16),i(4),h(5,"date"),n(),e(6,"ion-col",27),i(7),n(),e(8,"ion-col",18)(9,"ion-chip",28),i(10),n()(),e(11,"ion-col",29),i(12),n(),e(13,"ion-col",30),i(14),n(),e(15,"ion-col",20),i(16),h(17,"currency"),n(),e(18,"ion-col",21),i(19),h(20,"date"),n()()()()}if(c&2){let s=u.$implicit,d=v();a(4),g(_(5,8,s.datum,"dd.MM.yyyy")),a(3),g(s.nr||"-"),a(2),p("color",d.getStatusColor(s.status)),a(),g(s.status),a(2),g(s.name),a(2),g(s.kunde),a(2),w(" ",k(17,11,s.betrag??0,"EUR","symbol","1.2-2")," "),a(3),w(" ",_(20,16,s.letzteAenderung,"dd.MM.yyyy")," ")}}function ee(c,u){c&1&&(e(0,"ion-item",31),i(1," Keine Angebote gefunden "),n())}var ue=(()=>{let u=class u{constructor(d,t){this.dummy=d,this.router=t,this.projekteSig=this.dummy.projektesig,this.query=b(""),this.statusFilter=b("alle"),this.allOffers=y(()=>{let r=[];for(let l of this.projekteSig()){let o=l.angebote??[];for(let m of o)r.push({datum:new Date(m.datum),nr:m.nr,status:m.status,name:m.name,kunde:l.kunde,betrag:m.betrag,projektNr:l.nr,letzteAenderung:new Date(l.letzteAenderung)})}return r.sort((l,o)=>+o.datum-+l.datum),r}),this.filtered=y(()=>{let r=this.query().toLowerCase().trim(),l=this.statusFilter();return r?this.allOffers().filter(o=>{let m=!r||o.name.toLowerCase().includes(r)||o.nr.toLowerCase().includes(r)||o.kunde.toLowerCase().includes(r),Y=l==="alle"||l==="Entwurf"&&o.status.toLowerCase().includes("Entwurf")||l==="Versendet"&&o.status.toLowerCase().includes("Versendet")||l==="Akzeptiert"&&o.status.toLowerCase().includes("Akzeptiert")||l==="Abgelehnt"&&o.status.toLowerCase().includes("Abgelehnt");return m&&Y}):this.allOffers()}),this.dummy.createProjects(),Q({businessOutline:H,homeOutline:J,addOutline:U,searchOutline:W})}getStatusColor(d){let t=d.toLowerCase();return t.includes("abgeschlossen")?"success":t.includes("geplant")||t.includes("termin")?"primary":t.includes("arbeit")||t.includes("best\xE4tigt")?"tertiary":t.includes("erledigt")?"success":t.includes("angebot")||t.includes("entwurf")||t.includes("versendet")?"warning":t.includes("akzeptiert")?"success":t.includes("abgelehnt")?"danger":t.includes("rechnung")?"medium":t.includes("offen")?"warning":t.includes("teilgezahlt")?"tertiary":t.includes("bezahlt")?"success":t.includes("\xFCberf\xE4llig")||t.includes("storniert")?"danger":"medium"}openProjekt(d){this.router.navigate(["/projekte",d])}};u.\u0275fac=function(t){return new(t||u)(x(X),x(j))},u.\u0275cmp=z({type:u,selectors:[["app-angebote"]],decls:40,vars:4,consts:[[1,"ion-padding"],[1,"page-heading"],[1,"toolbar-row"],[1,"left"],["interface","popover",3,"ionChange","value"],["value","alle"],["value","Entwurf"],["value","Versendet"],["value","Akzeptiert"],["value","Abgelehnt"],[1,"right"],["placeholder","Suche","show-clear-button","focus","search-icon","search-outline",3,"ionInput","value"],["color","primary","fill","solid"],["slot","start","name","add-outline"],["fixed","",1,"row-grid","tbl","header","ion-padding-start","ion-padding-end"],[1,"ion-align-items-center"],["size","12","size-md","2.2"],["size","6","size-md","1.2"],["size","6","size-md","1.6"],["size","12","size-md","2.0"],["size","6","size-md","1.6",1,"right"],["size","6","size-md","1.2",1,"right"],[1,"table-list"],["button","","lines","full","detail","false","class","table-row",3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["button","","lines","full","detail","false",1,"table-row",3,"click"],["fixed","",1,"row-grid"],["size","6","size-md","1.2",1,"muted","ellipsis"],[3,"color"],["size","12","size-md","2.0",1,"ellipsis"],["size","12","size-md","2.2",1,"ellipsis"],["lines","none"]],template:function(t,r){t&1&&(e(0,"ion-content",0)(1,"div",1),i(2,"Angebote"),n(),e(3,"div",2)(4,"div",3)(5,"ion-select",4),f("ionChange",function(o){return r.statusFilter.set(o.detail.value)}),e(6,"ion-select-option",5),i(7,"Alle Angebote"),n(),e(8,"ion-select-option",6),i(9,"Entwurf"),n(),e(10,"ion-select-option",7),i(11,"Versendet"),n(),e(12,"ion-select-option",8),i(13,"Akzeptiert"),n(),e(14,"ion-select-option",9),i(15,"Abgelehnt"),n()()(),e(16,"div",10)(17,"ion-searchbar",11),f("ionInput",function(o){return r.query.set(o.detail.value??"")}),n(),e(18,"ion-button",12),I(19,"ion-icon",13),i(20," Neues Angebot "),n()()(),e(21,"ion-grid",14)(22,"ion-row",15)(23,"ion-col",16),i(24,"Angebotsdatum"),n(),e(25,"ion-col",17),i(26,"Nr."),n(),e(27,"ion-col",18),i(28,"Status"),n(),e(29,"ion-col",19),i(30,"Angebotsname"),n(),e(31,"ion-col",16),i(32,"Kunde"),n(),e(33,"ion-col",20),i(34,"Betrag"),n(),e(35,"ion-col",21),i(36,"Letzte \xC4nderung"),n()()(),e(37,"ion-list",22),E(38,Z,21,19,"ion-item",23)(39,ee,2,0,"ion-item",24),n()()),t&2&&(a(5),p("value",r.statusFilter()),a(12),p("value",r.query()),a(21),p("ngForOf",r.filtered()),a(),p("ngIf",!r.filtered().length))},dependencies:[N,V,B,L,T,q,F,D,$,O,G,K,R,M,P],styles:[".toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}.toolbar-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.row-grid[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-weight:500;margin-bottom:6px}ion-searchbar[_ngcontent-%COMP%]{max-width:380px;--border-radius: 10px}"]});let c=u;return c})();export{ue as AngebotePage};
