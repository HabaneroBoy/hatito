import{a as Z}from"./chunk-DWTWEUSI.js";import{a as q,b as J,f as Q,n as W,s as X}from"./chunk-PRD3V2AJ.js";import{D as b,E as w,Ga as H,H as x,Ha as U,J as j,K as D,L as O,N,R as B,b as y,c as I,d as M,e as o,f as S,fa as F,g as k,h as C,ha as z,i as p,j as i,k as r,l as P,o as E,oa as V,p as _,pa as A,q as h,qa as R,s,sa as $,t as f,u as v,ua as L,v as T,va as K,wa as Y,ya as G}from"./chunk-6T7TN4AG.js";import"./chunk-W6H37XDB.js";import"./chunk-7KGURMOZ.js";import"./chunk-YK4DTNHI.js";import"./chunk-YK3APVNZ.js";import"./chunk-366LSZGT.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function ee(l,d){if(l&1){let a=E();i(0,"ion-item",15),_("click",function(){let e=y(a).$implicit,n=h();return I(n.openProjekt(e.projektNr))}),i(1,"ion-label")(2,"div")(3,"strong"),s(4),r(),s(5),r(),i(6,"div",16),s(7),r()(),i(8,"ion-chip",17),s(9),r(),i(10,"ion-avatar",18)(11,"span"),s(12),r()()()}if(l&2){let a=d.$implicit,t=h();o(4),f(a.name),o(),v(" \u2014 ",a.vonBis||"\u2014"),o(2),f(a.projektName),o(),p("color",t.getStatusColor(a.status)),o(),v(" ",a.status," "),o(3),f(t.initials(a.mitarbeiter))}}function te(l,d){l&1&&(i(0,"ion-item",19),s(1," Keine Termine "),r())}function ne(l,d){if(l&1){let a=E();i(0,"ion-item",15),_("click",function(){let e=y(a).$implicit,n=h();return I(n.openProjekt(e.projektNr))}),i(1,"ion-label")(2,"div")(3,"strong"),s(4),r(),s(5),r(),i(6,"div",16),s(7),b(8,"date"),r()(),i(9,"ion-chip",17),s(10),r(),i(11,"ion-avatar",18)(12,"span"),s(13),r()()()}if(l&2){let a=d.$implicit,t=h();o(4),f(a.name),o(),v(" \u2014 ",a.vonBis||"\u2014"),o(2),T(" ",w(8,7,a.datum,"dd.MM.yyyy")," \xB7 ",a.projektName," "),o(2),p("color",t.getStatusColor(a.status)),o(),v(" ",a.status," "),o(3),f(t.initials(a.mitarbeiter))}}function ie(l,d){l&1&&(i(0,"ion-item",19),s(1," Keine Termine vorhanden "),r())}var ge=(()=>{let d=class d{constructor(t,e){this.dummy=t,this.router=e,this.selected=M(new Date().toISOString()),this.projektesig=this.dummy.projektesig,this.allEvents=x(()=>{let n=[],c=this.projektesig();for(let m of c){let g=m.termine??[];for(let u of g)n.push({datum:new Date(u.datum),vonBis:u.vonBis,status:u.status,name:u.name,mitarbeiter:u.mitarbeiter,projektName:m.name,projektNr:m.nr})}return n}),this.dayEvents=x(()=>{let n=new Date(this.selected()),c=[];for(let m of this.allEvents())this.sameDay(m.datum,n)&&c.push(m);return c.sort((m,g)=>this.parseStartMinute(m.vonBis)-this.parseStartMinute(g.vonBis)),c}),this.allEventsSorted=x(()=>{let n=this.allEvents().slice();return n.sort((c,m)=>{let g=+c.datum,u=+m.datum;return g!==u?g-u:this.parseStartMinute(c.vonBis)-this.parseStartMinute(m.vonBis)}),n}),this.dummy.createProjects(),q({businessOutline:Q,homeOutline:W,addOutline:J,searchOutline:X})}parseStartMinute(t){if(!t)return 1440;let e=/^(\d{1,2}):(\d{2})/.exec(t.trim());if(!e)return 1440;let n=parseInt(e[1],10),c=parseInt(e[2],10);return n*60+c}sameDay(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}initials(t){return(t||"").toUpperCase().slice(0,2)||"\u2013"}getStatusColor(t){let e=t.toLowerCase();return e.includes("abgeschlossen")?"success":e.includes("geplant")||e.includes("termin")?"primary":e.includes("arbeit")||e.includes("best\xE4tigt")?"tertiary":e.includes("erledigt")?"success":e.includes("angebot")||e.includes("entwurf")||e.includes("versendet")?"warning":e.includes("akzeptiert")?"success":e.includes("abgelehnt")?"danger":e.includes("rechnung")?"medium":e.includes("offen")?"warning":e.includes("teilgezahlt")?"tertiary":e.includes("bezahlt")?"success":e.includes("\xFCberf\xE4llig")||e.includes("storniert")?"danger":"medium"}openProjekt(t){this.router.navigate(["/projekte",t])}onDateChange(t){let e=t.detail.value,n=Array.isArray(e)?e[0]??"":e??"";this.selected.set(n)}};d.\u0275fac=function(e){return new(e||d)(S(Z),S(B))},d.\u0275cmp=k({type:d,selectors:[["app-termine"]],decls:24,vars:10,consts:[[1,"ion-padding"],[1,"toolbar-row","twoRowContentHeading"],[1,"page-heading","left"],[1,"right"],["color","primary","fill","solid"],["slot","start","name","add-outline"],["fixed",""],[1,"ion-align-items-start"],["size","12","size-lg","6",1,"twoRowContent"],[1,"page-heading"],["presentation","date",3,"ionChange","multiple","value"],["lines","full"],["button","",3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"page-heading",2,"margin-top","18px"],["button","",3,"click"],[1,"muted"],["slot","end",3,"color"],["slot","end",1,"tiny"],["lines","none"]],template:function(e,n){e&1&&(i(0,"ion-content",0)(1,"div",1)(2,"div",2),s(3,"Termine"),r(),i(4,"div",3)(5,"ion-button",4),P(6,"ion-icon",5),s(7," Neuer Termin "),r()()(),i(8,"ion-grid",6)(9,"ion-row",7)(10,"ion-col",8)(11,"div",9),s(12),b(13,"date"),r(),i(14,"ion-datetime",10),_("ionChange",function(m){return n.onDateChange(m)}),r(),i(15,"ion-list",11),C(16,ee,13,6,"ion-item",12)(17,te,2,0,"ion-item",13),r()(),i(18,"ion-col",8)(19,"div",14),s(20,"Alle Termine"),r(),i(21,"ion-list",11),C(22,ne,14,10,"ion-item",12)(23,ie,2,0,"ion-item",13),r()()()()()),e&2&&(o(12),v(" Termine am ",w(13,7,n.selected(),"dd.MM.yyyy")," "),o(2),p("multiple",!1)("value",n.selected()),o(2),p("ngForOf",n.dayEvents()),o(),p("ngIf",!n.dayEvents().length),o(5),p("ngForOf",n.allEventsSorted()),o(),p("ngIf",!n.allEventsSorted().length))},dependencies:[R,$,G,A,H,Y,L,K,V,j,U,z,F,N,D,O],styles:[".muted[_ngcontent-%COMP%]{color:var(--ion-color-medium)}ion-badge[_ngcontent-%COMP%]{color:var(--ion-color-light-contrast);border-radius:999px;padding:6px 10px;font-weight:600}.toolbar-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;flex-wrap:wrap}.toolbar-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}ion-avatar.tiny[_ngcontent-%COMP%]{width:35px;height:35px;background:var(--ion-color-success-shade);display:inline-flex;align-items:center;justify-content:center;border-radius:999px}ion-avatar.tiny[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-light-contrast);font-size:.8rem;font-weight:600}ion-datetime[_ngcontent-%COMP%]{border-radius:10px!important}"]});let l=d;return l})();export{ge as TerminePage};
